### Overview

---

This is the very first project for my journey of Unity Discovery(in short, UD). Following things are covered in this note:

- create a unity project and sync on github

- add some cubes to a scene and attach scripts to them

- load a new scene using a progress bar

---

### PART I Sync Project on Github

##### 1. create a new u3d project

- disable "version control": unity uses PlasticSCM by default

- add .gitignore file to the project

```gitignore
/[Ll]ibrary/
/[Tt]emp/
/[Oo]bj/
/[Bb]uild/
/[Bb]uilds/
/Assets/AssetStoreTools*

# Autogenerated VS/MD/Consulo solution and project files
ExportedObj/
.consulo/
*.csproj
*.unityproj
*.sln
*.suo
*.tmp
*.user
*.userprefs
*.pidb
*.booproj
*.svd


# Unity3D generated meta files
*.pidb.meta

# Unity3D Generated File On Crash Reports
sysinfo.txt

# Builds
*.apk
*.unitypackage
```

##### 2. create local git repo

- right click the project folder -> **git bash here**
  
  ```bash
  git init
  ```
  
  ```bash
  git add .
  ```
  
  ```bash
  git commit -m 'init'
  ```

##### 3. link local repo to remote(github)

- create a ssh key
  
  ```bash
  ssh-keygen -t rsa -C "<your email>"
  ```

- copy the public key content(id_rsa.pub) to github: **settings** -> **SSH and GPG keys** -> **New SSH key**

- create a repo on github

- add origin
  
  ```bash
  git remote add origin <.git url>
  ```

- switch branch
  
  ```bash
  git branch -M main
  ```

- push the commit
  
  ```bash
  git push -u origin main
  ```
  
  If git reports error: protocol "https" is not supported, maybe the <.git url> you enter above is not correct, reset it using:
  
  ```
  git remote set-url origin <.git url>
  ```

---

### PART II Attach Scripts to Game Objects

##### 1. add a cube to the scene

- **GameObject** -> **3D Object** -> **Cube**
  
  Â you may wanna turn this cube into a prefab:
  
  - create a folder inside **Assets** called Prefabs
  
  - drag the cube from **Hierarchy** to **Assets**, to the folder above

##### 2. create a mover script

- create a folder inside **Assets** called Scripts

- right click inside the folder, **Create** -> **C# Script** and rename it as you wish

- write a simple script that moves the cube upwards at a constant speed
  
  ```csharp
  using System.Collections;
  using System.Collections.Generic;
  using UnityEngine;
  
  public class Mover : MonoBehaviour
  {
      [SerializeField] private float speed = 1.0f;
      [SerializeField] private Vector3 direction = Vector3.up;
      // Start is called before the first frame update
      void Start()
      {
          this.transform.position = Vector3.zero;
      }
  
      // Update is called once per frame
      void Update()
      {
          var movement = direction * speed;
          this.transform.Translate(movement*Time.deltaTime);
      }
  }
  ```

- attach the script to the cube inside unity: simply drag the script to the cube

- you may use vscode or rider as a 3rd-party IDE for scripting and you may wanna test the ability of version control

##### 3. add another scene

- scenes are stored in Assets -> Scenes, where you can rename them, say loading scene and main scene

- add a cube(you can drag the prefab you created) to the new scene

- create a new script that fades the color of the cube and attach it
  
  ```csharp
  using System;
  using System.Collections;
  using System.Collections.Generic;
  using UnityEngine;
  
  /// <summary>
  /// ColorFading: Assign color to an object and update at each frame
  /// </summary>
  public class ColorFading : MonoBehaviour
  {
  
      // Update is called once per frame
      void Update()
      {
          var meshRenderer = GetComponent<MeshRenderer>();
          if (meshRenderer == null)
          {
              return;
          }
  
          var sineTime = Mathf.Sin(Time.time) + 0.5f;
          var color = new Color(sineTime, 0.5f, 0.5f);
          meshRenderer.material.color = color;
      }
  }
  ```

- save the scene

---

### PART III Create a Loading Interface

##### 1. create a canvas

Canvas is the 2D interface for our loading screen.

- back to loading scene

- right click inside **Hierarchy** -> **UI** -> **Canvas**

##### 2. add a panel to the canvas

The panel contains a slider that indicates the load progress. It should be invisible before we click on a button.

- right click the canvas -> **UI** -> **Panel**

- add a slider to the panel: right click the panel -> **UI** -> **slider**

##### 3. add a button and a text to the canvas

After clicking on the button, the loading process will start.

- right click the canvas -> **UI** -> **Legacy** -> **Button**, with text "next"

- right click the canvas -> **UI** -> **Legacy** -> **Text**, without text

##### 4. write the script that load another scene in an async way

```csharp
using System.Collections;
using UnityEngine;
using UnityEngine.UI;
using UnityEngine.SceneManagement;

public class MainLoader : MonoBehaviour
{
    
    public GameObject loadScreen;
    public Slider slider;
    public Text text;
    public Button button;

    public void LoadLevel()
    {
        StartCoroutine(AsyncLoad());
    }
    
    IEnumerator AsyncLoad()
    {
        button.gameObject.SetActive(false);
        loadScreen.SetActive(true);
        AsyncOperation asyncOperation = SceneManager.LoadSceneAsync(SceneManager.GetActiveScene().buildIndex+1);
        asyncOperation.allowSceneActivation = false;
        while (!asyncOperation.isDone)
        {
            slider.value = asyncOperation.progress;
            text.text = "loading..." + asyncOperation.progress * 100 + "%";
            if (asyncOperation.progress >= 0.9f)
            {
                slider.value = 1;
                text.text = "press any key...";
                if (Input.anyKeyDown) asyncOperation.allowSceneActivation = true;

            }

            yield return null;
        }

        asyncOperation.allowSceneActivation = true;
       
        
    }
}

```

##### 5. add a loader(trigger) that links the button with the script

- right click inside **Hierarchy** -> **Create Empty**, name it Loader

- drag the script above to the Loader, for each member slot inside the script tab, drag the object from the Hierarchy respectively:
  
  - Load Screen: Panel
  
  - Slider: Slider
  
  - Text: Text
  
  - Button: Button

- select the button, go to **Inspector** -> **Button** -> **On Click()**

- drag the Loader object from the **Hierarchy** to the object slot inside **On Click()**, select MainLoader.LoadLevel as the function to trigger.

##### 6. run the game

- set the panel invisible

- the progress may take no time cuz the Main scene is simple

- save the scenes, then commit the project and push it, ...


